# API Contracts

The backend provides a RESTful API generated by Strapi. All endpoints return JSON.

**Base URL**: `http://localhost:1337/api` (Local) or `https://<render-url>/api` (Prod).

## Response Format
Standard Strapi v5 Response:
```json
{
  "data": {
    "id": 1,
    "attributes": {
         // Field data here
    }
  },
  "meta": {
    "pagination": {
      "page": 1,
      "pageSize": 25,
      "pageCount": 1,
      "total": 1
    }
  }
}
```

## Endpoints

### 1. **Tickets Resource**

#### Create Ticket
-   **Endpoint**: `POST /tickets`
-   **Content-Type**: `application/json`
-   **Body**:
    ```json
    {
      "data": {
        "title": "My Issue",
        "description": "Details...",
        "email": "user@example.com",
        "priority": "High"
      }
    }
    ```
-   **Response**: `200 OK` with created ticket object.

#### Find Tickets (Filtering)
-   **Endpoint**: `GET /tickets`
-   **Parameters**:
    -   `filters[email][$eq]=user@example.com` (Find by exact email)
    -   `sort=createdAt:desc` (Sort by newest)
    -   `pagination[limit]=10` (Limit results)
-   **Example**: `GET /tickets?filters[email][$eq]=test@test.com`

#### Get One Ticket
-   **Endpoint**: `GET /tickets/:id`
-   **Response**: Single ticket object.

#### Update Ticket
-   **Endpoint**: `PUT /tickets/:id`
-   **Body**: JSON with updated fields.

#### Delete Ticket
-   **Endpoint**: `DELETE /tickets/:id`

## Authentication
-   **Public**: Can be configured to allow Public access (common for Ticket Submission).
-   **Authenticated**: Requires `Authorization: Bearer <jwt_token>` header. Permission levels managed in Admin Panel > Settings > Users & Permissions.
